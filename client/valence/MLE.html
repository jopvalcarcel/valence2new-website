    <!DOCTYPE html>
    <html lang="en">
    <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MLE Calculator</title>
    <link rel="stylesheet" href="MLE.css">
  <link href='https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css' rel='stylesheet'>  
  </head>
    <body>
    <!-- Sidebar Navigation -->
    <div class="sidebar">
        <h2>Calculator</h2>
        <button onclick="resetForm()">Reset</button>
        <button onclick="calculate()">Calculate</button>
        <button onclick="fillExample()">Example</button>
        <button onclick="generateReport()">Generate Report</button>
   
   
       <ul class="menu-links">
    <li class="nav-link">
      <a href="Dashboard.html">
        <i class='bx bx-home-alt icon'></i>
        <span class="text nav-text">Dashboard</span>
      </a>
    </li>

   
   
   
   
   
   
      </div>

    <!-- Main Content -->
    <div class="main">
        <h1>MLE Stage with Preanoxic Tank</h1>

        <div class="container">
        <!-- MBBR Parameters -->
        <div class="section">
            <h3>Influent Parameters</h3>
            <label>Flowrate (m³/d)<input type="number" id="txtFlowrate"></label>
            <label>BOD (mg/L)<input type="number" id="BODin"></label>
            <label>bBOD (mg/L)<input type="number" id="txtbCODin"></label>
            <label>bBOD/COD (mg/L)<input type="number" id="bCODBODratio"></label>
            <label>TKN (mg/L)<input type="number" id="TKN"></label>
            <label>NH4N (mg/L)<input type="number" id="Nin"></label>
            
            <label>nbVSS (mg/L)<input type="number" id="nbVSS"></label>
            <label>iTSS (mg/L)<input type="number" id="iTSS"></label>
            <label>Temperature (°C)<input type="number" id="TEMP"></label>
        
        </div>

        <!-- Effluent -->
        <div class="section">
            <h3>Effluent</h3>
            <label>BOD out (mg/L)<input type="number" id="BODOut" readonly></label>
            <label>NO3N out (mg/L)<input type="number" id="NO3Nout" readonly></label>
            <label>NH4N out (mg/L)<input type="number" id="Neffluent" readonly></label>
        
        </div>

        <!-- rbCOD -->
        <div class="section">
            <h3>rbCOD</h3>
            <label>rbCOD (mg/L)<input type="number" id="rbCOD"></label>
            <label>COD (mg/L)<input type="number" id="COD"></label>
            <label>percent rbCOD (%)<input type="number" id="percentrbCOD" readonly></label>
        </div>

        <!-- Anoxic Tank -->
        <div class="section">
            <h3>preDN Tank - Tank Sizing</h3>
            <label>Tank Vol. to Vpre and Vm (%)<input type="number" id="percentanoxictankvolume"></label>
            <label>Anoxic Tank Volume (m³)<input type="number" id="AnoxicTankVolume" readonly></label>
            <label>HRT (hrs)<input type="number" id="PreanoxHRT" readonly></label>
        </div>


        

        <!-- PreDN Tank -->
        <div class="section">
            <h3>preDN Tank - Biological</h3>
            <label>IR (mg/L)<input type="number" id="IR" readonly></label>
            <label>Internal Reccylce (m3/d)<input type="number" id="InternalRecycle" readonly></label>
            <label>NOX feed to Anoxic (g/gd)<input type="number" id="NOXfeed" readonly></label>
            <label>food to mass Ratio (g/gd)<input type="number" id="FMb" readonly></label>
            <label>b0<input type="number" id="bo" readonly></label>
            <label>b1<input type="number" id="b1" readonly></label>
            <label>SDNR20 (g/gd)<input type="number" id="SDNR" readonly></label>
            <label>SDNRT (g/gd)<input type="number" id="SDNRT" readonly></label>
            <label>SDNRadj (g/gd)<input type="number" id="SDNRadj" readonly></label>
            <label>Overall SDNR (g/gd)<input type="number" id="SDNRoverall" readonly></label>
            <label>MLSS (g/m³)<input type="number" id="Xpreanox" readonly></label>
            <label>MLVSS (g/m³)<input type="number" id="XMLVSSpreanox" readonly></label>
            <label>NOX Removal (g/d)<input type="number" id="NOXremoval" readonly></label>
            <label>Nitrate after Aeration (mg/L)<input type="number" id="Ne" readonly></label>


        </div>

            <!-- Anoxic Mixing -->
            <div class="section">
                <h3>preDN Tank - Tank Sizing</h3>
                <label>Mixing Energy (kW/m3) (%)<input type="number" id="MixingEnergy"></label>
                <label>Power (kW)<input type="number" id="MixingPower" readonly></label>
            </div>
        

        <!-- Aeration Tank -->
        <div class="section">
            <h3>Aeration Tank</h3>
            <label>Vaer (m³)<input type="number" id="Vaer" readonly></label>
            <label>HRT (d)<input type="number" id="VaerHRT" readonly></label>
        </div>

         <div class="section">
        <h3>Tank Illustration</h3>
        <img src="MLE.png" alt="Mass Balance Diagram" style="max-width: 100%; height: auto;">
      </div>



        <!-- Biological Parameters -->
        <div class="section">
            <h3>Aeration Tank - Biological Parameters</h3>
            <label>uMAX (g/gd)<input type="number" id="umax" readonly></label>
            <label>b,AOB (g/gd)<input type="number" id="baob" readonly></label>
            <label>SNH4 (g/m³)<input type="number" id="SNH4" readonly></label>
            <label>KNH4 (g/m³)<input type="number" id="KNH4" readonly></label>
            <label>So (g/m³)<input type="number" id="SDO" readonly></label>
            <label>Ko (g/m³)<input type="number" id="KOAOB" readonly></label>
            <label>u (g/m³)<input type="number" id="u" readonly></label>
            <label>Necessary SRT (d)<input type="number" id="NecSRT"></label>
            <label>Necessary SRT (d)<input type="number" id="SRT"></label>
            <label>Px,bio (kg/d)<input type="number" id="pxbio"></label>
            <label>Heterotrphs kg/d (g/m³)<input type="number" id="txtHBkgd" readonly></label>
            <label>decay (kg/d)<input type="number" id="txtCDkgd" readonly></label>
            <label>AOB Bacteria (kg/d)<input type="number" id="txtNBkgd" value="0.45"></label>
            <label>Px,vss (kg/d)<input type="number" id="pxvss" readonly></label>
            <label>Px,tss (kg/d)<input type="number" id="pxtss" readonl></label>
            <label>NOX (g/m³)<input type="number" id="NOXX" readonly></label>
            <label>Peak factor NH4max/NH4min (--)<input type="number" id="NH4Peakfactor" readonly></label>
            <label>Desight SRT (d)<input type="number" id="SRT" readonly></label>
            <label>fd (-)<input type="number" id="txtfd" readonly></label>
            <label>bn (g/gd)<input type="number" id="txtbn" readonly></label>
            <label>YH (--)<input type="number" id="txtYH" readonly></label>
            <label>bh (g/gd)<input type="number" id="txtbH" readonly></label>
            <label>YN (--)<input type="number" id="txtYN" readonly></label>

            <label>MLSS (g/m³)<input type="number" id="MLSSAeration" readonly></label>
            <label>fraction MLVSS (g/m³)<input type="number" id="fractionMLVSS" readonly></label>
            <label> MLVSS (g/m3)<input type="number" id="MLVSS" readonly></label>
            <label> FM Ratio (kg/kg d)<input type="number" id="FMRatio" readonly></label>
            <label> BOD Loading in(kg/ d)<input type="number" id="BODloading" readonly></label>
            <label> BOD Loading out(kg/ d)<input type="number" id="BODloadingout" readonly></label>
            <label> BOD Removed out(kg/ d)<input type="number" id="BODremoved" readonly></label>
            <label> YOBS (gTSS/gBOD)<input type="number" id="YOBS" readonly></label>
            <label> fraction xb (--)<input type="number" id="fractionxb" readonly></label>

            
        
        </div>

        <!-- Clarifier Sizing -->
        <div class="section">
            <h3>Clarifier Sizing</h3>
            <label>MLSS (g/m³)<input type="number" id="Xclarifier"></label>
            <label>XR (g/m³)<input type="number" id="XRAS" readonly></label>
            <label> R (--)<input type="number" id="R" readonly></label>
            <label>RAS(m³/d)<input type="number" id="RAS"></label>
            <label>Hydraulic Application rate (m³/m²/d)<input type="number" id="HAR"></label>
            <label>Area Required (m²)<input type="number" id="ClarifierAreaRequired" readonly></label>
    
        </div>

        <!-- Aeration Parameters -->
        <div class="section">
            <h3>Aeration Parameters</h3>
            <label>AOTR (kg/h)<input type="number" id="iv1txtOUR" readonly></label>
            <label>Site Elevation (m)<input type="number" id="iv1txtelev"></label>
            <label>Temperature (degC)<input type="number" id="iv1txtTemp"></label>
            <label>Pa, Relative Pressure at elevation<input type="number" id="iv1txtRP"></label>
            <label>Water Depth (m)<input type="number" id="iv1txtLD"></label>
            <label>Diffuser height (m)<input type="number" id="iv1txtDDfromBottom"></label>
            <label>Diffuser Depth (m)<input type="number" id="iv1txtDD" readonly></label>
            <label>Mid Depth Correction Factor<input type="number" id="iv1txtde"></label>
            <label>Oxygen Conc. at Standard<input type="number" id="iv1txtOCS"></label>
            <label>Oxygen Conc. at Temperature<input type="number" id="iv1txtOCT"></label>
            <label>Oxygen Conc. at diff.Depth<input type="number" id="iv1txtOCSd" readonly></label>
            <label>α<input type="number" id="iv1txta"></label>
            <label>β<input type="number" id="iv1txtb"></label>
            <label>Fouling Factor<input type="number" id="iv1txtf"></label>
            <label>Operating DO (mg/L)<input type="number" id="iv1txtDO"></label>
            <label>SOTR (kg/hr)<input type="number" id="iv1txtSOTR" readonly></label>
            <label>Density of Air (kg/m³)<input type="number" id="iv1txtDA"></label>
    .        <label>Concentration of O2 (kg/m³)<input type="number" id="iv1txtO2"></label>
            <label>OTE% per level (%/m)<input type="number" id="iv1OTEpersubmerged"></label>
            <label>Clean Water Transfer (%)<input type="number" id="iv1txtE" readonly></label>
            <label>Air Flow Required (m³/min)<input type="number" id="iv1txtAF" readonly></label> 
        </div>



        <!-- Air Requirements -->
        <div class="section">
            <h3>Total Air Requirements</h3>
            <label>OTR (kg O₂/d) Total<input type="number" id="ivOTR" readonly></label>
            <label>OTR (kg O₂/d-BOD)<input type="number" id="ivOTRBOD" readonly></label>
            <label>OTR (kg O₂/d-NH4N)<input type="number" id="ivOTRNH4N" readonly></label>
            <label>OTR (kg O₂/d-Gained)<input type="number" id="ivOTRCredit" readonly></label>
            <label>Total Aeration Requirement (m³/hr)<input type="number" id="ivtxtAFTOT" readonly></label>

        </div>

        

        <!-- Solids Parameters -->
        <div class="section">
            <h3>Solids Parameters</h3>
            <label>Solids Content (%)<input type="number" id="txtSolidsContent"></label>
            <label>SG Sludge (kg/m³)<input type="number" id="txtSGSludgeperm3Sludge"></label>
            <label>Sludge Flowrate (m³/d)<input type="number" id="txtSludgeflowrate" readonly></label>
        </div>

        <!-- Alkalinity Dosing -->
        <div class="section">
            <h3>Alkalinity Sizing</h3>
            <label>Residual Alkalinity (mg/L)<input type="number" id="MLEResAlkalinity"></label>
            <label>Influent Alkalinity (mg/L)<input type="number" id="MLEInfAlkalinity"></label>
            <label>Alkalinity Used (mg/L)<input type="number" id="MLEAlkalinityUsed" readonly></label>
            <label>Alkalinity Produced (mg/L)<input type="number" id="MLEAlkalinityProduced" readonly></label>
            <label>Alkalinity to be Added (mg/L)<input type="number" id="MLEAlkalinitytobeAdded" readonly></label>
            <label>Mass to be Added (kg/d)<input type="number" id="MLEMassAlkalinity" readonly></label>
        </div>
<!-- Report Section -->
      <div class="report-section" id="reportSection" style="display: none;">
        <h1>Design Report</h1>
        
        <div class="project-info">
          <div class="project-info-item">
            <label for="projectName">Project Name:</label>
            <input type="text" id="projectName">
          </div>
          <div class="project-info-item">
            <label for="projectNumber">Project Number:</label>
            <input type="text" id="projectNumber">
          </div>
          <div class="project-info-item">
            <label for="projectDate">Date:</label>
            <input type="date" id="projectDate">
          </div>
          <div class="project-info-item">
            <label for="projectVersion">Version Number:</label>
            <input type="text" id="projectVersion" value="1.0">
          </div>
        </div>
        
        <h3>MLE Tank Design Report</h3>
        <table border="1" cellpadding="5" cellspacing="0">
          <thead>
            <tr>
              <th>Parameter</th>
              <th>Unit</th>
              <th>Value</th>
            </tr>
          </thead>
          <tbody>
         <td>Average Flowrate</td>
    <td>m<sup>3</sup>/d</td>
    <td><input type="text" id="txtFlowrate2" readonly /></td>
  </tr>
  <tr>
    <td>BODin</td>
    <td>mg/L</td>
    <td><input type="text" id="BODin2" readonly /></td>
  </tr>
  <tr>
    <td>TKNin</td>
    <td>mg/L</td>
    <td><input type="text" id="TKN2" readonly /></td>
  </tr>
  <tr>
    <td>BODout</td>
    <td>mg/L</td> 
    <td><input type="text" id="BODOut2" readonly /></td>
  </tr>
    <tr>
    <td>BODout</td>
    <td>mg/L</td>
    <td><input type="text" id="BODOut2" readonly /></td>
  </tr>

  
  <tr>
    <td>NH4Nout</td>
    <td>mg/L</td>
    <td><input type="text" id="Neffluent2" readonly /></td>
  </tr>
  <tr>
    <td>NO3Nout</td>
    <td>mg/L</td>
    <td><input type="text" id="NO3Nout2" readonly /></td>
  </tr>

  <tr>
    <td>Temperature</td>
    <td>°C</td>
    <td><input type="text" id="iv1txtTemp2" readonly /></td>
  </tr>
  <tr>

    <tr>
    <td>Anoxic Tank</td>
    <td>m<sup>3</sup></td>
    <td><input type="text" id="AnoxicTankVolume2" readonly /></td>
  </tr>

  <tr>
    <td>SRT</td>
    <td>d</td>
    <td><input type="text" id="SRT2" readonly /></td>
  </tr>
  <tr>

  <tr>
    <td>Aeration Tank</td>
    <td>m<sup>3</sup></td>
    <td><input type="text" id="Vaer2" readonly /></td>
  </tr>

  <tr>
    <td>HRT</td>
    <td>hrs</sup></td>
    <td><input type="text" id="VaerHRT2" readonly /></td>
  </tr>


   <tr>
    <td>MLSS</td>
    <td>g/m<sup>3</sup></sup></td>
    <td><input type="text" id="MLSSAeration2" readonly /></td>
  </tr>


  <tr>
    <td>Clarifier</td>
    <td>m<sup>2</sup></td>
    <td><input type="text" id="ClarifierAreaRequired2" readonly /></td>
  </tr>
     

 <tr>
    <td>Oxygen Transfer rate</td>
    <td>kg/O₂d </td>
    <td><input type="text" id="ivOTR2" readonly /></td>
  </tr>





    <tr>
    <td>DO set point BOD Removal</td>
    <td>mg/L</td>
    <td><input type="text" id="iv1txtDO2" readonly /></td>
  </tr>

      <tr>
    <td>Water level  BOD Removal</td>
    <td>m</td>
    <td><input type="text" id="iv1txtLD2" readonly /></td>
  </tr>
 

     <tr>
    <td>Oxygen Transfer Efficiency</td>
    <td>%</td>
    <td><input type="text" id="iv1txtE2" readonly /></td>
  </tr>

   <tr>
    <td>Air Requirement</td>
    <td>m³/min</td>
    <td><input type="text" id="iv1txtAF2" readonly /></td>
  </tr>


  

        <tr>
    <td>Sludge Wasting </td>
    <td>m³/d</td>
    <td><input type="text" id="txtSludgeflowrate2" readonly /></td>
  </tr>










  
          </tbody>
        </table>
 <button class="print-button" onclick="printReport()">Print Report</button>



        </div>
                <!-- Tank Drawing Section -->
        <div class="section" style="flex: 1 1 100%;">
            <h2>Rectangular Tank Isometric Drawing</h2>
            <div class="input-section">
            <div class="input-group">
                <label for="length">Length (m):</label>
                <input type="number" id="length" min="1" value="35">
            </div>
            <div class="input-group">
                <label for="width">Width (m):</label>
                <input type="number" id="width" min="1" value="25">
            </div>
            <div class="input-group">
                <label for="depth">Depth (m):</label>
                <input type="number" id="depth" min="1" value="6">
            </div>
            <div class="volume-display">
                <label>Volume:</label>
                <div id="volume">5,250</div>
                <span>(m³)</span>
            </div>
            <button id="draw-btn">Draw Tank</button>
            </div>
            <div class="canvas-container">
            <canvas id="tankCanvas"></canvas>
            </div>
        </div>
    </div>

    <script src="MLE.js"></script>
    <script src="drawMLE.js"></script>
    </body>
    </html>